webpackJsonp([2,0],{0:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var i=a(105),r=n(i),o=a(104),s=n(o),d=a(93),u=n(d),l=a(99),c=n(l),f=a(102),p=n(f),v=a(103),h=n(v),m=a(100),g=n(m),b=a(8);r.default.use(s.default),r.default.use(u.default);var x=new s.default;x.map({"":{component:p.default},"/time-log/:sheetId":{component:h.default},"/create-time-log":{component:g.default}}),x.start(c.default,"#app"),(0,b.initializeGoogleApi)()},8:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return gapi.auth.authorize({client_id:O,scope:P,immediate:e},p)}function r(e){function t(){o(),e()}var a=gapi.auth.getToken();if(a){var n=a.access_token,i="https://accounts.google.com/o/oauth2/revoke?token="+n;window.jQuery.ajax({type:"GET",url:i,async:!1,contentType:"application/json",dataType:"jsonp",success:t,error:t})}gapi.auth.signOut(),a||setTimeout(t,0)}function o(){k.default.filesLoaded=!1,k.default.files=[],k.default.authenticated=void 0}function s(e){return gapi.client.sheets.spreadsheets.values.get({spreadsheetId:e,range:E}).then(x,w)}function d(e,t,a,n){return gapi.client.sheets.spreadsheets.values.append({spreadsheetId:e,valueInputOption:"USER_ENTERED",range:E,values:[[t,a,n]]}).then(x,w)}function u(e){return gapi.client.sheets.spreadsheets.create((0,T.default)(e)).then(function(t){var a=t.result;return k.default.files.unshift({id:a.spreadsheetId,name:e}),a},w)}function l(){return gapi.auth?void(I||(I=!0,i(!0))):void(window.initializeGoogleApi=l)}function c(e){if(!e)throw new Error("Response is required here");return e.result&&e.result.error?e.result.error.message:"Unknown error :("}function f(e,t){if(j.has(e)){var a=j.get(e);return void setTimeout(function(){return t(a)},0)}gapi.client.sheets.spreadsheets.get({spreadsheetId:e,fields:"properties/title"}).then(function(a){var n=b(a,"result.properties.title");j.set(e,n),t(n)})}function p(e){k.default.authenticated=e&&!e.error,k.default.authenticated&&v()}function v(){gapi.client.load("https://sheets.googleapis.com/$discovery/rest?version=v4").then(h),gapi.client.load("drive","v3",m)}function h(){k.default.sheetsAPIReady=!0}function m(){gapi.client.drive.files.list({q:"mimeType='application/vnd.google-apps.spreadsheet' and trashed = false",pageSize:100}).execute(function(e){k.default.filesLoaded=!0,k.default.files=e.files,g(e.files)},w)}function g(e){e.forEach(function(e){j.set(e.id,e.name)})}function b(e,t){if(!e)return e;for(var a=t.split("."),n=0;n<a.length;++n){var i=a[n];if(e=e[i],!e)return e}return e}function x(e){return e}function w(e){return 401===e.status&&window.location.reload(),e}Object.defineProperty(t,"__esModule",{value:!0});var y=a(50),_=n(y);t.signIn=i,t.signOut=r,t.fetchLastRecords=s,t.logTime=d,t.createSpreadsheet=u,t.initializeGoogleApi=l,t.getError=c,t.getSheetTitle=f;var S=a(14),k=n(S),M=a(44),T=n(M),O="616901175953-k3qnrg34f7khs5a688k8l51oqn4f15o1.apps.googleusercontent.com",E="A4:H",P=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/spreadsheets"],j=new _.default,I=!1},14:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={authenticated:void 0,sheetsAPIReady:!1,filesLoaded:!1,files:[],pageName:""};t.default=a},17:function(e,t){"use strict";function a(e){var t=new Date(e+"Z");return t.toISOString().substr(0,"2016-09-27T02:10:00".length).replace(/T/," ").replace(/-/g,"/")}function n(){return i(new Date)}function i(e){return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())}function r(e){return e<10?"0"+e:e}Object.defineProperty(t,"__esModule",{value:!0}),t.convertDateToSheetsDateString=a,t.getNow=n,t.toDateInputStr=i},27:function(e,t){"use strict";function a(e){return e.$route.params.sheetId}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},42:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){e.recordsState="loading";var t=(0,u.default)(e);return(0,c.fetchLastRecords)(t).then(function(t){e.recordsState="loaded";var a=t.result.values||[],n=a.reverse().slice(0,200);e.lastRecords=n;var i=r(n);i?e.start=i:(e.start=(0,l.getNow)(),e.end=(0,l.getNow)())},function(e){console.error("failed to load range",e)})}function r(e){if(0===e.length)return"";var t=e[0];if(t.length<2)return"";var a=t[1];if(!a)return"";var n=new Date(a);return(0,s.default)(n.getDate())?"":(0,l.toDateInputStr)(n)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(51),s=n(o);t.default=i;var d=a(27),u=n(d),l=a(17),c=a(8)},43:function(e,t){"use strict";function a(){return void 0!==i?i:i=n()}function n(){var e=document.createElement("input");e.setAttribute("type","datetime-local");var t="not-a-date";return e.setAttribute("value",t),e.value!==t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var i=void 0},44:function(e,t){"use strict";function a(e){return{properties:{title:""+e},sheets:n("Time Log")}}function n(e){return{properties:{title:e,gridProperties:{frozenRowCount:1,frozenColumnCount:3}},data:[i()]}}function i(){return{startRow:0,startColumn:0,rowData:{values:[r("Start"),r("End"),r("What?")]}}}function r(e){return{userEnteredValue:{stringValue:e},userEnteredFormat:{horizontalAlignment:"CENTER",textFormat:{bold:!0}}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a},45:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(14),r=n(i),o=a(8);t.default={ready:function(){$(".button-collapse").sideNav()},data:function(){return r.default},methods:{onSignInClick:function(){(0,o.signIn)()},onSignOutClick:function(){(0,o.signOut)(function(){return window.location.reload()})}},computed:{unknown:function(){return void 0===r.default.authenticated},apiLoaded:function(){return r.default.authenticated&&r.default.sheetsAPIReady},needsAuthentication:function(){return r.default.authenticated===!1}}}},46:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(8);t.default={data:function(){return{name:"",status:"",error:""}},methods:{create:function(){var e=this;this.status="saving",(0,n.createSpreadsheet)(this.name).then(function(t){e.status="";var a=t.spreadsheetId;e.$router.go("/time-log/"+a)},function(t){e.error=(0,n.getError)(t)})}}}},47:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(){function e(){}return{setDate:e,destroy:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(92),o=n(r),s=a(17),d=a(43),u=n(d);t.default={props:["label","value"],ready:function(){var e=this,t={allowInput:!0,enableTime:!1,time_24hr:!0,enableSeconds:!1,dateFormat:"d.m.Y",utc:!1,onChange:function(){e.changeFromFlatPickr=!0}};this.flatPickr=(0,u.default)()?i():new o.default(this.$els.date,t)},detached:function(){this.flatPickr.destroy()},methods:{setNow:function(){this.value=(0,s.getNow)()}},watch:{value:function(e){this.changeFromFlatPickr?this.changeFromFlatPickr=!1:this.flatPickr.setDate(e)}}}},48:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(14),r=n(i);t.default={data:function(){return r.default},route:{data:function(){r.default.pageName="Select Sheet"}},computed:{empty:function(){return 0===r.default.files.length&&r.default.filesLoaded}}}},49:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(14),r=n(i),o=a(8),s=a(17),d=a(42),u=n(d),l=a(27),c=n(l),f=a(101),p=n(f);t.default={data:function(){return{recordsState:"loading",lastRecords:[],day:"",saveState:"",sheetTitle:""}},computed:{editLink:function(){var e=(0,c.default)(this);return"https://docs.google.com/spreadsheets/d/"+e+"/edit"}},components:{DateWithoutTime:p.default},route:{data:function(){var e=this;r.default.pageName="Loading data...",(0,u.default)(this).then(function(){var t=(0,c.default)(e);(0,o.getSheetTitle)(t,function(t){r.default.pageName=t,e.sheetTitle=t})})}},methods:{refreshRecords:function(){(0,u.default)(this)},logIt:function(){var e=this;this.saveState="saving";var t=(0,s.convertDateToSheetsDateString)(this.day),a=(0,c.default)(this);(0,o.logTime)(a,t).then(function(){e.lastRecords.unshift([t]),e.day="",e.saveState="done",e.error=""},function(t){e.saveState="error",e.error=(0,o.getError)(t)})}}}},91:function(e,t){},94:function(e,t){e.exports=' <div> <div class=navbar-fixed> <nav> <div class=nav-wrapper> <a href=# class=brand-logo><i class=material-icons>home</i></a> <a href=# data-activates=mobile-demo class=button-collapse><i class=material-icons>menu</i></a> <ul id=nav-mobile class="right hide-on-med-and-down"> <li v-if=authenticated><a href=# @click.prevent=onSignOutClick>Abmelden</a></li> </ul> <ul class=side-nav id=mobile-demo> <li v-if=authenticated><a href=# @click.prevent=onSignOutClick>Abmelden</a></li> </ul> </div> </nav> </div> <div class=container> <div v-if=unknown> <h3>Checking authentication...<h3> </h3></h3></div> <div v-if=apiLoaded> <router-view class=view keep-alive></router-view> </div> <div v-if=needsAuthentication> <h1>Anmeldung</h1> <a class="waves-effect waves-light btn" @click=onSignInClick>Zu Google Sheets</a> </div> </div> </div> '},95:function(e,t){e.exports=' <div> <h3>Neue Tabelle erstellen</h3> <form @submit.prevent=create> <div class=input-field> <label for=name>Dateiname:</label> <input id=name type=text v-model=name autofocus> </div> <input type=submit class="waves-effect waves-light btn col s12" value="Create new file" v-if=\'status === ""\'/> </form> <div v-if=\'status === "saving"\'> <h4>Saving {{name}}...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> <div v-if=error class="card-panel red-text"> <h4>Error...</h4> <pre><code>{{error}}</code></pre> <div> Refresh the page maybe? </div> </div> </div> '},96:function(e,t){e.exports=" <div> <label>{{label}} <a href=# v-clap.prevent=setNow()>jetzt</a></label> <input v-el:date type=date v-model=value data-input> </div> "},97:function(e,t){e.exports=' <div> <div v-if=empty> <h3>No time sheets?</h3> <p>I could not find any time logs in your account. <a v-link="{path: \'/create-time-log\'}">Create new time log</a>. </p> </div> <div v-if="filesLoaded && !empty"> <h4>Your Sheets</h4> <div class=collection> <a class=collection-item v-for="file in files" v-link="{path: \'/time-log/\' + file.id}">{{file.name}}</a> </div> <div class=fixed-action-btn> <a class="btn-floating btn-small red" v-link="{path: \'/create-time-log\'}" title="Create new time log"> <i class="small material-icons">add</i> </a> </div> </div> </div> '},98:function(e,t){e.exports=' <div> <h4>{{sheetTitle}}</h4> <form novalidate @submit.prevent=logIt> <date-without-time label=Start :value.sync=day></date-without-time> <div class=input-field> <label for=what>What?</label> <input id=what type=text v-model=what> </div> <div class=row v-if=\'saveState !== "saving"\'> <input type=submit class="waves-effect waves-light btn col s12" value="Log time"/> </div> </form> <div v-if=\'saveState === "saving"\'> <h4>Saving...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> <div v-if=\'saveState === "error"\' class="card-panel red-text"> <h4>Error...</h4> <pre><code>{{error}}</code></pre> <div> Refresh the page maybe? </div> </div> <div v-if=\'recordsState === "loaded"\'> <table> <thead> <tr> <th data-field=nr>Nr</th> <th data-field=tag>Tag</th> <th data-field=baustelle>Baustelle</th> <th data-field=art>Art</th> <th data-field=von>Von</th> <th data-field=bis>Bis</th> <th data-field=pause>Pause</th> <th data-field=gesamt>Gesamt <a href=# @click.prevent=refreshRecords class=right title=refresh>&#x21bb;</a> </th> </tr> </thead> <tbody> {{lastRecords}} <tr v-for="record in lastRecords"> <td>{{record[0]}}</td> <td>{{record[1]}}</td> <td>{{record[2]}}</td> <td>{{record[3]}}</td> <td>{{record[4]}}</td> <td>{{record[5]}}</td> <td>{{record[6]}}</td> <td>{{record[7]}}</td> </tr> </tbody> </table> <div class=fixed-action-btn style="bottom: 12px; right: 12px"> <a class="btn-floating btn-small red" :href=editLink title="Edit records..." target=_blank> <i class="small material-icons">mode_edit</i> </a> </div> </div> <div v-if=\'recordsState === "loading"\'> <h4>Loading records...</h4> <div class=progress> <div class=indeterminate></div> </div> </div> </div> '},99:function(e,t,a){var n,i,r={};a(91),n=a(45),i=a(94),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(r).forEach(function(e){var t=r[e];o.computed[e]=function(){return t}})},100:function(e,t,a){var n,i,r={};n=a(46),i=a(95),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(r).forEach(function(e){var t=r[e];o.computed[e]=function(){return t}})},101:function(e,t,a){var n,i,r={};n=a(47),i=a(96),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(r).forEach(function(e){var t=r[e];o.computed[e]=function(){return t}})},102:function(e,t,a){var n,i,r={};n=a(48),i=a(97),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(r).forEach(function(e){var t=r[e];o.computed[e]=function(){return t}})},103:function(e,t,a){var n,i,r={};n=a(49),i=a(98),e.exports=n||{},e.exports.__esModule&&(e.exports=e.exports.default);var o="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;i&&(o.template=i),o.computed||(o.computed={}),Object.keys(r).forEach(function(e){var t=r[e];o.computed[e]=function(){return t}})}});
//# sourceMappingURL=app.f2615a5c88c48968b931.js.map